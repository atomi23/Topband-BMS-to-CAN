üîã Topband / EET BMS zu Victron VE.Can GatewayEin ESP32-basiertes Gateway, das Topband-BMS-Batterien (z.B. EET, Power Queen, etc.) √ºber RS485 ausliest und als intelligentes BMS √ºber CAN-Bus an Victron GX-Ger√§te (Cerbo, MultiPlus) sendet.(Beispielbild des Web-Interfaces)‚ö†Ô∏è Disclaimer & WarnungBITTE VOR DER NUTZUNG LESEN:DIY Projekt: Dies ist ein privates Hobby-Projekt und keine offizielle Software eines Herstellers.Auf eigene Gefahr: Die Nutzung erfolgt auf eigenes Risiko. Der Entwickler √ºbernimmt keine Haftung f√ºr Sch√§den an Batterien, Wechselrichtern, BMS oder anderer Hardware.Nur f√ºr private Nutzung: Dieses Projekt ist f√ºr den privaten Einsatz gedacht. Keine kommerzielle Nutzung oder Vertrieb ohne Genehmigung.Experten-Funktionen: √Ñnderungen an Ladespannungen oder Stromgrenzen k√∂nnen Akkus zerst√∂ren, wenn sie falsch eingestellt werden.üöÄ Features (Firmware V59)F√ºr Victron (CAN-Bus)Vollst√§ndige Integration: Meldet sich als kompatible Batterie am Victron System an.DVCC Support: √úbermittelt Ladespannungslimit (CVL), Ladestromlimit (CCL) und Entladestromlimit (DCL).Aggregation: Fasst mehrere BMS-Module (bis zu 16) zu einer gro√üen Batteriebank zusammen (Summe Strom & Kapazit√§t, Durchschnittsspannung & SOC).Sicherheit: Reduziert den Ladestrom automatisch, wenn der Akku voll wird (Balancing-Phase).Web-Interface (Dashboard)Live-Daten: Zeigt Spannungen, Str√∂me, SOC, SOH und Temperaturen in Echtzeit.Zell-√úberwachung: Detaillierte Ansicht aller Zellspannungen mit Drift-Anzeige (Min/Max Differenz) und Farbcodierung.Zwei Ansichten:Karten-Ansicht: Gro√üe, gut lesbare Kacheln.Listen-Ansicht: Kompakte Tabelle f√ºr viele Batterien (aufklappbar).Diagnose: Integriertes Live-Log f√ºr RS485-Daten und CAN-Status.Hardware & KonfigurationPlug & Play: Einfache Einrichtung √ºber WLAN-Hotspot.mDNS Support: Erreichbar unter http://victron-gateway.local (keine IP-Suche n√∂tig).Konfigurierbar: Anzahl der BMS, Batteriestrom und Zellenzahl (15s/16s) √ºber Web-Oberfl√§che einstellbar.Experten-Modus: Manuelle Anpassung der Ladeschlussspannung (CVL) m√∂glich (auf eigene Gefahr).üõ† Unterst√ºtzte HardwareDer Code ist optimiert f√ºr ESP32-Boards mit isoliertem RS485 und CAN Transceiver.Empfohlen:LILYGO¬Æ T-CAN485 (ESP32)Waveshare ESP32-S3-RS485-CANVerkabelung:RS485 (BMS): A an A, B an B.CAN (Victron): H an H, L an L.WICHTIG: Der CAN-Bus muss am ESP32 und am Victron terminiert werden (120 Ohm Widerstand einschalten/stecken!).‚ö° Installation (Der einfache Weg)Sie m√ºssen keine Programmierumgebung installieren. Nutzen Sie einfach den Web-Browser.1. Firmware herunterladenLaden Sie die aktuelle .bin Datei aus den Releases herunter (z.B. VictronGateway_V59_Factory.bin).2. Flashen √ºber Web-ToolVerbinden Sie das ESP32-Board per USB mit dem PC.√ñffnen Sie web.esphome.io oder den Adafruit Web Flasher (Chrome/Edge Browser).Klicken Sie auf Connect und w√§hlen Sie den COM-Port.W√§hlen Sie die .bin Datei aus und klicken Sie auf Install/Program.3. EinrichtungNach dem Neustart √∂ffnet der ESP32 einen WLAN-Hotspot: Victron-Gateway-Setup.Verbinden Sie sich mit dem Handy/Laptop.Geben Sie Ihre WLAN-Daten ein.Nach dem Neustart ist das Dashboard unter http://victron-gateway.local erreichbar.üíª Installation (F√ºr Entwickler / Source Code)Wer den Code selbst kompilieren m√∂chte, ben√∂tigt die Arduino IDE oder PlatformIO.Ben√∂tigte Bibliotheken:WiFiManager (by tzapu) - f√ºr das Captive Portal.Adafruit NeoPixel (by Adafruit) - f√ºr die Status-LED.ESP32 Board Support Package (by Espressif).Einstellungen (Arduino IDE):Board: ESP32 Dev Module (f√ºr Lilygo) oder ESP32S3 Dev Module (f√ºr Waveshare).Partition Scheme: Huge APP (empfohlen, falls OTA genutzt wird).‚ùì FAQ & TroubleshootingIch sehe "CAN FEHLER" im Dashboard?Ist das Kabel zum Victron korrekt (H/L)?Ist der 120 Ohm Abschlusswiderstand am ESP32-Board aktiviert (DIP-Schalter oder L√∂tbr√ºcke)? Ohne diesen funktioniert die Kommunikation oft nicht!Ist am Victron der Terminator gesteckt?Mein BMS wird nicht gefunden (Timeout)?Stimmt die ID am BMS (DIP-Schalter)? Das Gateway sucht bei ID 0 (DIP alle aus) oder ID 1 (DIP 1 an) beginnend.Sind A und B bei RS485 vertauscht?Die LED leuchtet rot?Rot bedeutet Fehler beim Senden auf dem CAN-Bus (siehe oben "CAN FEHLER").Gr√ºn blinkend bedeutet: Alles OK, Daten werden gesendet.ü§ù MitwirkenFehler gefunden oder Ideen f√ºr Verbesserungen? Erstellt gerne ein Issue oder einen Pull Request!
